(t=>{function e(){return t.matchMedia?.("(pointer: coarse)").matches}function o(t,e){let o;return function(...r){clearTimeout(o),o=setTimeout(()=>t.apply(this,r),e)}}const r=new WeakMap;class s{constructor(t){if(this.popoverShown=!1,this.triggerEl=t,this.popoverEl=t.nextElementSibling,!this.popoverEl||!this.popoverEl.hasAttribute("popover"))return void console.error("Popover trigger has no adjacent popover element.",t);this.placement=this.triggerEl.dataset.popover||"bottom",this.placementFallback=this.triggerEl.dataset.popoverPlacementFallback?n(this.triggerEl.dataset.popoverPlacementFallback):p(this.placement),this.trigger=this.triggerEl.dataset.popoverTrigger||"click","hover"===this.trigger&&e()&&(this.trigger="click"),this.hoverDelay=Number.parseInt(this.triggerEl.dataset.popoverHoverDelay||"150"),this.hoverOutDelay=Number.parseInt(this.triggerEl.dataset.popoverHoverOutDelay||"150"),this.offset=this.getDefaultOffset(),this.hoverTimeout=null,this.triggerHovered=!1,this.popoverHovered=!1,this.popoverEl.id||(this.popoverEl.id=`data-popover-${Math.random().toString(36).slice(2,11)}`),"hover"!==this.trigger&&this.triggerEl.setAttribute("popovertarget",this.popoverEl.id),this.popoverEl.addEventListener("toggle",t=>{this.popoverShown="open"===t.newState,this.popoverShown&&(this.positionPopover(),this.popoverEl.dispatchEvent(new CustomEvent("data-popover:show")))}),"hover"===this.trigger&&this.setupHoverHandlers();new ResizeObserver(()=>{this.popoverEl.matches(":popover-open")&&this.positionPopover()}).observe(this.popoverEl),r.set(t,this)}setupHoverHandlers(){this.triggerEl.addEventListener("mouseenter",()=>{this.triggerHovered=!0,clearTimeout(this.hoverTimeout),this.popoverEl.matches(":popover-open")||(this.hoverTimeout=setTimeout(()=>{(this.triggerHovered||this.popoverHovered)&&this.popoverEl.showPopover()},this.hoverDelay))}),this.triggerEl.addEventListener("mouseleave",()=>{this.triggerHovered=!1,this.scheduleHide()}),this.popoverEl.addEventListener("mouseenter",()=>{this.popoverHovered=!0,clearTimeout(this.hoverTimeout)}),this.popoverEl.addEventListener("mouseleave",()=>{this.popoverHovered=!1,this.scheduleHide()})}scheduleHide(){clearTimeout(this.hoverTimeout),this.hoverTimeout=setTimeout(()=>{this.triggerHovered||this.popoverHovered||this.popoverEl.hidePopover()},this.hoverOutDelay)}getDefaultOffset(){const t=getComputedStyle(this.popoverEl);return Number.parseFloat(t.getPropertyValue("--data-popover-arrow-width"))||8}calculateCoords(t,e,o){let r,s;switch(t){case"right":r=e.right+this.offset,s=e.top+e.height/2-o.height/2;break;case"right-start":r=e.right+this.offset,s=e.top;break;case"right-end":r=e.right+this.offset,s=e.bottom-o.height;break;case"left":r=e.left-o.width-this.offset,s=e.top+e.height/2-o.height/2;break;case"left-start":r=e.left-o.width-this.offset,s=e.top;break;case"left-end":r=e.left-o.width-this.offset,s=e.bottom-o.height;break;case"top":r=e.left+e.width/2-o.width/2,s=e.top-o.height-this.offset;break;case"top-start":r=e.left,s=e.top-o.height-this.offset;break;case"top-end":r=e.right-o.width,s=e.top-o.height-this.offset;break;case"bottom-start":r=e.left,s=e.bottom+this.offset;break;case"bottom-end":r=e.right-o.width,s=e.bottom+this.offset;break;default:"bottom"!==t&&console.error(`Invalid popover placement: "${t}"`),r=e.left+e.width/2-o.width/2,s=e.bottom+this.offset}return{left:r,top:s}}isOutOfBounds(e){return e.top<0||e.left<0||e.bottom>t.innerHeight||e.right>t.innerWidth}positionPopover(){requestAnimationFrame(()=>{const e=this.triggerEl.getBoundingClientRect(),o=this.popoverEl.getBoundingClientRect(),r=[this.placement,...this.placementFallback];let s=this.placement;for(const t of r){const r=this.calculateCoords(t,e,o),i={top:r.top,left:r.left,bottom:r.top+o.height,right:r.left+o.width};if(!this.isOutOfBounds(i)){s=t;break}}let{left:i,top:h}=this.calculateCoords(s,e,o);i+=t.scrollX,h+=t.scrollY;const p=Math.round(this.popoverEl.style.left)!==Math.round(i),n=Math.round(this.popoverEl.style.top)!==Math.round(h);p&&(this.popoverEl.style.left=`${i}px`),n&&(this.popoverEl.style.top=`${h}px`),(p||n)&&(this.popoverEl.dataset.popoverLoc=l(s))})}}function i(){for(const t of document.querySelectorAll("[popover]:popover-open")){const e=t.previousElementSibling;if(e){const t=r.get(e);t&&t.positionPopover()}}}document.addEventListener("click",t=>{const e=t.target.closest?.("[data-popover]");if(!e)return;if("hover"===(e.dataset.popoverTrigger||"click"))return;r.has(e)||new s(e);const o=e.tagName.toUpperCase();if(!("BUTTON"===o||"INPUT"===o&&e.type&&"button"===e.type.toLowerCase())){e.hasAttribute("href")&&t.preventDefault();const o=r.get(e);o.popoverShown?o.popoverEl.hidePopover():o.popoverEl.showPopover()}}),document.addEventListener("mouseover",t=>{const o=t.target.closest?.("[data-popover]");if(o&&!r.has(o)){"hover"!==(o.dataset.popoverTrigger||o.getAttribute("data-popover-trigger")||"click")||e()||new s(o)}}),t.addEventListener("scroll",function(t,e){let o=0,r=null;return function(...s){const i=Date.now(),h=e-(i-o);h<=0?(r&&(clearTimeout(r),r=null),o=i,t.apply(this,s)):r||(r=setTimeout(()=>{o=Date.now(),r=null,t.apply(this,s)},h))}}(i,15)),t.addEventListener("resize",o(i,15)),document.addEventListener("DOMContentLoaded",()=>{new MutationObserver(o(i,15)).observe(document.body,{childList:!0,subtree:!0,attributes:!0})});const h={t:"b r l",b:"t r l",l:"r t b",r:"l t b",ts:"te bs be rs ls",te:"ts be bs re le",bs:"be ts te rs ls",be:"bs te ts re le",ls:"le rs re ts bs",le:"ls re rs te be",rs:"re ls le ts bs",re:"rs le ls te be"};function p(t){return n(h[l(t)])}function l(t){const e=t.split("-");let o=e[0].charAt(0);if(2===e.length&&(o+=e[1].charAt(0)),!(o in h))throw new Error(`Invalid placement name: "${t}"`);return o}function n(t){try{return t.split(" ").map(t=>function(t){if(!(t in h))throw new Error(`Invalid short placement name: "${t}"`);const e={t:"top",b:"bottom",l:"left",r:"right"}[t.charAt(0)];if(1===t.length)return e;const o={s:"start",e:"end"}[t.charAt(1)];return`${e}-${o}`}(t))}catch(e){throw new Error(`Failed to decode placement fallback: "${t}"`,{cause:e})}}t.d=p})(window);